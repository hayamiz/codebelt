.SUBDIRS: images

LATEX = platex -interaction=batchmode
DVIPDFM = dvipdfmx
DVIPDFMFLAGS = -r 2400 -z 0 -f font.map

TARGET = report

#
# PHONY rules
#

.PHONY: clean clobber build

clean:
  rm -f *.aux *.log *.bbl *.toc *.nav *.fls *.out *.snm *.vrb *.dvi *.blg

clobber: clean
  rm -f *.pdf

.SCANNER: scan-svg-images: $(TARGET).tex
  println($(TARGET).dvi: $(string $(replacesuffixes .svg, .eps, $(ls i, images/*.svg))))

build: $(TARGET).dvi $(TARGET).pdf

$(TARGET).dvi: :scanner: scan-svg-images

#
# Document generation rules
#

LaTeXDocument($(TARGET), $(TARGET))

.DEFAULT: build
